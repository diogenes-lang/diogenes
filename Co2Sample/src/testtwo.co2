
honesty Alice Bob

contract A {
	a! (+) b! . B
}

contract B {
	a? + b? . A
}

specification Alice {
	tell x A . P(x, "Alice")
}

specification Bob {
	tell x B . P1(x,"Bob")
}

specification P(x:session, p:string) {
	send@x b! . P1(x, p)
}

specification P1(x:session, p:string) {
	receive {
		@x a?
		@x b? -> 
			if p=="Alice" 
			then send@x a! 
			else P(x, p)
	}
}
